---
description: 対話形式でカスタムコマンドを新規作成
allowed-tools: Read(**), Write(**), Glob(**)
---

# カスタムコマンド作成

対話形式で新しいカスタムコマンドを作成します。

## 引数

`$ARGUMENTS` - コマンド名（省略可能）

## 実行手順

### Step 1: 既存コマンドの確認

まず `~/.claude/commands/` 内の既存コマンドを確認し、重複を防ぎます。

```bash
ls ~/.claude/commands/
```

### Step 2: 情報収集（対話形式）

以下の情報をユーザーから収集してください。AskUserQuestionツールを使用します。

#### 2-1: コマンド名

引数 `$ARGUMENTS` が空の場合、コマンド名を質問します。

```
コマンド名は何にしますか？
例: analyze-logs, generate-report, check-status
```

**命名規則**: `動詞-名詞` 形式を推奨（例: draft-commit, format-subtitle）

#### 2-2: カテゴリ選択

```
カテゴリを選択してください:

| カテゴリ | 用途 |
|---------|------|
| work | 業務（日報、タスク管理など） |
| blog | ブログ執筆 |
| util | ユーティリティ（変換、整形など） |
| git | Git操作 |
| cmd | コマンド管理（このコマンド自身） |
```

#### 2-3: 説明

```
このコマンドは何をしますか？（1行で簡潔に）
```

#### 2-4: 引数

```
引数は必要ですか？
- なし
- 必須: <引数名>
- オプション: [引数名]
```

#### 2-5: 主要機能

```
どのような処理を行いますか？（箇条書きで）
例:
- ファイルを読み込む
- 内容を分析する
- 結果を出力する
```

### Step 3: 必要ツールの推定

収集した情報から、必要なツールを自動推定します。

| 処理内容 | 推定ツール |
|---------|-----------|
| ファイル読み込み | Read(**) |
| ファイル書き込み | Write(**) |
| ファイル検索 | Glob(**), Grep(**) |
| シェルコマンド実行 | Bash(command:*) |
| Git操作 | Bash(git:*) |
| Web取得 | WebFetch(*), WebSearch(*) |
| AWS操作 | Bash(aws:*) |
| ユーザーへの質問 | （allowed-tools不要） |

### Step 4: コマンドファイル生成

以下のフォーマットでファイルを生成します。

**ファイルパス**: `~/.claude/commands/{カテゴリ}:{コマンド名}.md`

**フォーマット**:

```markdown
---
description: {説明}
allowed-tools: {推定ツール}
---

# {コマンドタイトル}

{詳細説明}

## 引数

`$ARGUMENTS` - {引数の説明}

## 実行手順

### Step 1: {ステップ名}

{処理内容}

### Step 2: {ステップ名}

{処理内容}

## 出力

{出力形式の説明}
```

### Step 5: 完了報告

```
✅ コマンドを作成しました

📄 ファイル: ~/.claude/commands/{カテゴリ}:{コマンド名}.md
🏷️ カテゴリ: {カテゴリ}
📝 説明: {説明}
🔧 allowed-tools: {ツール一覧}

使用方法:
/{カテゴリ}:{コマンド名} {引数}
```

---

## 簡潔化のルール

生成するコマンドは以下のルールに従って簡潔にします：

**削除すべき要素:**
- 冗長な説明や繰り返し
- 自明な内容（「ファイルを読み込みます」→ 「読み込む」）
- 過度な詳細

**保持すべき要素:**
- 具体的なファイルパス・コマンド
- CRITICAL/厳守事項
- エラーハンドリング
- 実行例

---

## 例: 実行フロー

```
ユーザー: /cmd:create

Claude: コマンド名は何にしますか？
ユーザー: check-deployment

Claude: カテゴリを選択してください（work/blog/util/git/cmd）
ユーザー: work

Claude: このコマンドは何をしますか？
ユーザー: デプロイの状態を確認する

Claude: 引数は必要ですか？
ユーザー: 環境名（必須）

Claude: どのような処理を行いますか？
ユーザー:
- AWS CLIでデプロイ状況を取得
- 結果を整形して表示

Claude: ✅ コマンドを作成しました
📄 ファイル: ~/.claude/commands/work:check-deployment.md
```

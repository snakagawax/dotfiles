---
description: 英語Markdownファイルを日本語に翻訳（固有名詞を保持）
---

# 英語→日本語翻訳コマンド

英語のMarkdownファイルを日本語に翻訳します。AWSサービス名などの固有名詞はそのまま保持します。

**引数**: `$ARGUMENTS` - 翻訳対象の英語Markdownファイルのパス

## 処理概要

1. ファイルを読み込み、チャンクに分割
2. 各チャンクを順次翻訳（オーバーラップで文脈維持）
3. 結果を結合して出力

## 実行手順

### ステップ1: ファイル情報の確認

Readツールでファイルの先頭100行を読み取り、内容を確認します：
- ファイルパス: `$ARGUMENTS`

Bashツールで総行数を確認：
```bash
wc -l "$ARGUMENTS"
```

### ステップ2: チャンク分割と処理

**分割ルール:**
- 1チャンク: 約100行
- オーバーラップ: 前のチャンクの最後15行を次のチャンクに含める

**各チャンクの処理:**

Readツールでファイルをチャンクごとに読み込みます：
- チャンク1: offset=0, limit=100
- チャンク2: offset=85, limit=100（15行オーバーラップ）
- チャンク3: offset=170, limit=100
- ...以降同様

各チャンクに対して、以下の翻訳を実行：

**翻訳プロンプト（各チャンクに適用）:**

```
以下の英語テキストを日本語に翻訳してください。

【翻訳ルール】

1. **固有名詞は翻訳せずそのまま保持する**
   以下のカテゴリの用語は英語のまま残してください：

   - AWSサービス名: Amazon Bedrock, Amazon S3, AWS Lambda, EC2, SageMaker,
     Agent Core, Amazon Nova, Amazon Connect, GuardDuty, Security Hub など
   - AWS製品・技術: Trainium, Graviton, Nitro, Kiro, Nova Lite, Nova Pro,
     P5, P6, TRN3 など
   - 一般的な技術用語: Kubernetes, Docker, Terraform, GitHub, API, SDK,
     OAuth, IAM, CI/CD, DevOps など
   - 企業名: Amazon, NVIDIA, Intel, AMD, Apple, Microsoft, Sony, Adobe,
     Google, Netflix など
   - イベント名: re:Invent, AWS Summit など
   - 役職: CEO, CTO, CFO など
   - 人名: Matt Garman, Andy Jassy など

2. **Markdown書式を維持する**
   - 見出し（#, ##, ###）はそのまま保持
   - 箇条書き（-, *）はそのまま保持
   - 強調（**, __）はそのまま保持
   - コードブロック（```）はそのまま保持
   - リンク記法はそのまま保持

3. **タイムスタンプを保持する**
   - [0:00] や [1:23:45] 形式のタイムスタンプはそのまま残す

4. **翻訳の質**
   - 直訳ではなく、自然な日本語表現を使用する
   - 技術的な正確性を維持する
   - 文脈に応じた適切な訳語を選択する
   - 「です・ます」調で統一する

5. **記号・マーカーの扱い**
   - [Music]、[Applause] などの記号はそのまま残す

【直前のパートの最終部分】
{前のチャンクの最後の翻訳済み2-3段落。最初のチャンクでは省略}

【翻訳対象のテキスト】
{現在のチャンクのテキスト}
```

**重要: チャンク処理時の注意**
- 最初のチャンク以外は、前のチャンクの最後の翻訳結果（2-3段落）を「直前のパートの最終部分」として含める
- オーバーラップ部分の重複した内容は、結合時に削除する
- 各チャンクの処理結果を一時的に保持し、最後に結合する

### ステップ3: 結果の結合

すべてのチャンクの処理が完了したら：

1. オーバーラップ部分の重複を削除
2. 全チャンクの結果を順番に結合
3. 最終的な翻訳済みテキストを作成

### ステップ4: 出力ファイルの作成

Writeツールで出力ファイルを作成します。

**出力ファイル名の形式:**
```
{元のファイル名（拡張子なし）}_ja_{YYYYMMDD}_{HHMMSS}.md
```

例：`keynote_transcript_formatted_ja_20231215_143052.md`

**出力ファイルのパス:** 元のファイルと同じディレクトリ

**ファイル先頭に追加するメタ情報:**
```markdown
# {元のタイトルまたはファイル名}（日本語訳）

## メタデータ
- **原文**: {元のファイルのフルパス}
- **翻訳日**: {処理日時}
- **処理チャンク数**: {チャンク数}

---

```

### ステップ5: 完了報告

処理完了後、以下を報告：
- 出力ファイルのパス
- 処理したチャンク数
- 総行数

## 出力例

```markdown
# AWS re:Invent 2025 CEO Keynote（日本語訳）

## メタデータ
- **原文**: /path/to/keynote_transcript_formatted.md
- **翻訳日**: 2023-12-15 14:30:52
- **処理チャンク数**: 8

---

### オープニングと歓迎

[0:00] [Music]

[0:42] 皆さん、ようこそ。re:Inventへようこそ。ここにいられて本当に嬉しいです。
ラスベガスへようこそ。そして、ご参加いただいた皆さん、本当にありがとうございます。
私はAWSのCEO、Matt Garmanです。

[1:18] まずは参加者の皆さんを歓迎させてください。ラスベガスにお越しの皆さん、
ありがとうございます。そして、世界中の2,400以上のイベントからご参加の皆さんにも
挨拶を送ります。

### AWSの成長と規模

[1:33] まず背景からお話しさせてください。AWSは現在、年間売上高が約1,150億ドルに
達するビジネスに成長しました。直近の四半期は19%の成長を遂げましたが、
これはまだ始まりに過ぎません。
```

## エラー処理

- ファイルが見つからない場合: エラーメッセージを表示して終了
- チャンク処理中にエラーが発生: そこまでの結果を保存して継続

## 注意事項

- 処理には時間がかかる場合があります（長いファイルで10-20分程度）
- 固有名詞の判断は文脈に基づいて行われます
- 翻訳の品質は元のテキストの明確さに依存します
